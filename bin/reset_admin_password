#!/usr/bin/python2.7


import sys
sys.path.append("/opt/oasisqe/3.9/src")

from oasis.lib import Users, OaConfig, Users2, Permissions

passwd = Users.gen_confirm_code()

uid = Users.uid_by_uname('admin')
if not uid:
    uid = Users.create(uname="admin",
                       passwd="NOLOGIN",
                       email=OaConfig.email,
                       givenname="Admin",
                       familyname="Account",
                       acctstatus=1,
                       studentid="",
                       source="local",
                       confirm_code="",
                       confirm=True)
Users2.set_password(uid, passwd)

Permissions.add_perm(uid, 0, 1)  # superuser
print "The new admin password is:  ", passwd


